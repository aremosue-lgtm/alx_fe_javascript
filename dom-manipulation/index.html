<!DOCTYPE html>
const categoryFilter = document.getElementById("categoryFilter");
if (!categoryFilter) return;


const categories = ["all", ...new Set(quotes.map(q => q.category))];
categoryFilter.innerHTML = categories
.map(cat => `<option value="${cat}">${cat}</option>`)
.join("");


const saved = localStorage.getItem("lastSelectedCategory");
if (saved) {
categoryFilter.value = saved;
filterQuotes();
}
}


function filterQuotes() {
const category = document.getElementById("categoryFilter").value;
localStorage.setItem("lastSelectedCategory", category);


if (category === "all") {
showRandomQuote();
return;
}


const filtered = quotes.filter(q => q.category === category);
if (filtered.length === 0) {
quoteDisplay.textContent = "No quotes available in this category.";
return;
}


const i = Math.floor(Math.random() * filtered.length);
const q = filtered[i];
quoteDisplay.textContent = `"${q.text}" â€” (${q.category})`;
sessionStorage.setItem("lastViewedQuote", i);
}


populateCategories();


// ======= Load Last Viewed Quote on Page Load =======
window.addEventListener('DOMContentLoaded', () => {
const lastIndex = sessionStorage.getItem(SS_LAST_VIEWED_KEY);
if (lastIndex !== null && quotes[lastIndex]) {
displayQuote(lastIndex);
}
});
</script>
</body>
</html>
