<!DOCTYPE html>


// ======= Add Quote =======
addBtn.addEventListener('click', () => {
const newQuote = quoteInput.value.trim();
if (!newQuote) return alert("Please enter a quote.");


quotes.push(newQuote);
saveQuotes();
quoteInput.value = '';
alert("Quote added!");
});


// ======= Generate Random Quote =======
generateBtn.addEventListener('click', () => {
if (quotes.length === 0) return alert("No quotes available.");


const randomIndex = Math.floor(Math.random() * quotes.length);
displayQuote(randomIndex);
});


// ======= Export Quotes (JSON Download) =======
function exportToJsonFile() {
const dataStr = JSON.stringify(quotes, null, 2);
const blob = new Blob([dataStr], { type: 'application/json' });
const url = URL.createObjectURL(blob);


const a = document.createElement('a');
a.href = url;
a.download = 'quotes.json';
a.click();
URL.revokeObjectURL(url);
}
exportBtn.addEventListener('click', exportToJsonFile);


// ======= Import Quotes from JSON File =======
function importFromJsonFile(event) {
const file = event.target.files[0];
if (!file) return;


const reader = new FileReader();
reader.onload = function(e) {
try {
const imported = JSON.parse(e.target.result);
if (!Array.isArray(imported)) throw new Error();


quotes.push(...imported);
saveQuotes();
alert('Quotes imported successfully!');
} catch (err) {
alert('Invalid JSON file.');
}
};


reader.readAsText(file);
}


importFile.addEventListener('change', importFromJsonFile);


// ======= Load Last Viewed Quote on Page Load =======
window.addEventListener('DOMContentLoaded', () => {
const lastIndex = sessionStorage.getItem(SS_LAST_VIEWED_KEY);
if (lastIndex !== null && quotes[lastIndex]) {
displayQuote(lastIndex);
}
});
</script>
</body>
</html>
